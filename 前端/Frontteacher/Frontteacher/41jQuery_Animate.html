<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        #container {
            width: 1000px;
            margin: auto;
        }


            #container > div {
                /*border: 2px groove #808080;*/
                box-shadow: 0px 0px 20px black;
                border-radius: 10px;
                margin: 10px;
                padding: 15px;
            }

                #container > div > p {
                    margin: 10px;
                    padding: 10px;
                }

            #container > img {
                width: inherit;
                margin: auto;
            }

        .displayCenter {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #switcher span{
            border:1px solid;
            font-size:1.5rem;
            padding:3px;
            cursor:pointer;
        }
        .small{
            font-size:0.5rem;
        }
        .midd{
            font-size:1rem;
        }
        .big{
            font-size:2rem;
        }
    </style>
</head>
<body>

    <div id="container">
        <h1>全球農業旅遊休閒園區</h1>
        輸入城市查詢 :   <input type="text" id="textCity"/>    <input type="button" id="button1" value="查詢" onclick="textbox()" />
                                                         <div id="switcher">
                                                             <span id="large" onclick="test(this)">大</span>
                                                             <span id="default" onclick="test(this)">中</span>
                                                             <span id="small" onclick="test(this)">小</span>
                                                         </div>
    </div>

    <script src="Scripts/jquery-3.6.0.min.js"></script>
    <script>

        function test(that) {
            console.log(that)
            console.log($(that).text())
            if ($(that).text() == "大") {
                $('#TravelData').removeClass().addClass('big')
            } else if ($(that).text() == "中") {
                $('#TravelData').removeClass().addClass('midd')
            } else {
                $('#TravelData').removeClass().addClass('small')
            }
        }

        $('#switcher').click(function (evt) {

            console.log(evt.target.id)
            console.log(evt)
            if (evt.target.id != 'switcher'){
                $('#TravelData').removeClass().addClass(evt.target.id);
                $('#switcher>span').removeClass();
                $(evt.target).addClass('selected');
            }
        });

        $("#container>h1:first-child").hide().fadeIn(2000);

        var item = "";
        $('#container').append("<div id='TravelData'></div>")
        textbox();
        function textbox() {
            $('#TravelData').empty();
            console.log($('#TravelData').empty());
            $.ajax({
                type: 'get',
                url: `https://data.coa.gov.tw/Service/OpenData/ODwsv/ODwsvAttractions.aspx?$filter=City+like+${$('#textCity').val()}`,
                success: function (data) {
                    console.log(data);
                    for (var i = 0; i < data.length; i++) {
                        //item = "<div>";
                        //item += "<h2>" + data[i].Name + "</h2>";
                        //item += "<h4>" + data[i].Tel + "</h4>";
                        //item += `<a href="https://www.google.com.tw/maps/search/${data[i].Address}" target="_blank">${data[i].Address}</a></br>`;
                        //item += "<img src='" + data[i].Photo + "' />";
                        //item += "</div>";
                        //item += "<hr>";

                        item =
                            `<div class="displayCenter" title = "${data[i].Introduction}">
                                         <h1> ${data[i].Name}</h1>
                                         <img src='${data[i].Photo}'/>
                                         <h4>電話 : ${data[i].Tel}</h4>
                                         <p>地址 :  <a href='https://www.google.com.tw/maps/search/${data[i].Address}' target="_blank">${data[i].Address}</a></br></p>
                                    </div>`;
                        $('#TravelData').append(item);
                    }
                },
                error: function () {
                    alert('error');
                }
            });
        }


    </script>
</body>
</html>